const KEY_ENTER=13,KEY_ESC=27;var orderLink=document.querySelector(".contact-us"),modalOrder=document.querySelector(".modal-order"),orderForm=document.querySelector(".order-form"),orderClose=document.querySelector(".order-close"),orderName=document.querySelector(".order-form-name"),orderEmail=document.querySelector(".order-form-email"),orderMessage=document.querySelector(".order-form-message"),isStorageSupport=!0,storage="",mapLink=document.querySelector(".contacts-map"),modalMap=document.querySelector(".modal-map"),mapClose=document.querySelector(".map-close"),btnLeft=document.querySelector(".slider-to-left"),btnRight=document.querySelector(".slider-to-right"),slides=document.querySelectorAll(".slide"),paginations=document.querySelectorAll(".slider-pagination-btn"),serviceItemDelivery=document.querySelector(".service-delivery"),serviceItemQuarantee=document.querySelector(".service-quarantee"),serviceItemCredit=document.querySelector(".service-credit"),serviceListItems=document.querySelectorAll(".services-list-item"),serviceListCount=serviceListItems.length-1,serviceItems=document.querySelectorAll(".service-item"),serviceItemsCount=serviceItems.length-1;try{storage=localStorage.getItem("name")}catch(e){isStorageSupport=!1}function orderOpenHandler(e){e.preventDefault(),modalOrder.classList.remove("visually-hidden"),modalOrder.classList.add("modal-animation"),storage?(orderName.value=storage,orderEmail.focus()):orderName.focus()}function orderCloseHandler(e){e.preventDefault(),modalOrder.classList.add("visually-hidden"),modalOrder.classList.remove("modal-animation"),modalOrder.classList.remove("modal-error")}function init(){new ymaps.Map(document.querySelector(".modal-map"),{center:[59.938635,30.323118],zoom:18}).geoObjects.add(new ymaps.Placemark([59.93875,30.323118],{},{preset:"islands#dotIcon",iconColor:"#EE3643"}))}function mapOpenHandler(e){e.preventDefault(),modalMap.classList.remove("visually-hidden")}function mapCloseHandler(e){e.preventDefault(),modalMap.classList.add("visually-hidden")}function changeSlide(){slides.forEach(e=>{e.classList.toggle("visually-hidden")}),paginations.forEach(e=>{e.classList.toggle("pagination-active")})}function removeIsActiveTabClass(){for(var e=0;e<=serviceListCount;e++)serviceListItems[e].classList.remove("is-active")}function addVisuallyHiddenToServiceItems(){for(let e=0;e<=serviceItemsCount;e++)serviceItems[e].classList.add("visually-hidden")}orderForm.addEventListener("submit",function(e){orderName.value&&orderEmail.value&&orderMessage.value?isStorageSupport&&localStorage.setItem("name",orderName.value):(e.preventDefault(),modalOrder.classList.remove("modal-error"),modalOrder.offsetWidth=modalOrder.offsetWidth,modalOrder.classList.add("modal-error"))}),document.addEventListener("keydown",function(e){27===e.keyCode&&(modalOrder.classList.contains("visually-hidden")||orderCloseHandler(e))}),orderLink.addEventListener("keydown",function(e){13===e.keyCode&&modalOrder.classList.contains("visually-hidden")&&orderOpenHandler(e)}),orderLink.addEventListener("click",orderOpenHandler),orderClose.addEventListener("click",orderCloseHandler),mapLink.addEventListener("keydown",function(e){13===e.keyCode&&modalMap.classList.contains("visually-hidden")&&mapOpenHandler(e)}),document.addEventListener("keydown",function(e){27===e.keyCode&&(modalMap.classList.contains("visually-hidden")||mapCloseHandler(e))}),mapLink.addEventListener("click",mapOpenHandler),mapClose.addEventListener("click",mapCloseHandler),ymaps.ready(init),btnRight.addEventListener("click",function(e){e.preventDefault(),changeSlide()}),btnLeft.addEventListener("click",function(e){e.preventDefault(),changeSlide()});for(var j=0;j<=serviceListCount;j++)serviceListItems[j].addEventListener("click",function(e){removeIsActiveTabClass(),e.target.classList.add("is-active"),e.target.classList.contains("service-list-delivery")&&(addVisuallyHiddenToServiceItems(),serviceItemDelivery.classList.remove("visually-hidden")),e.target.classList.contains("service-list-quarantee")&&(addVisuallyHiddenToServiceItems(),serviceItemQuarantee.classList.remove("visually-hidden")),e.target.classList.contains("service-list-credit")&&(addVisuallyHiddenToServiceItems(),serviceItemCredit.classList.remove("visually-hidden"))});
